(function(){facilis.game.gameAssetsUrl="gameAssets/";facilis.ActivityElement.prototype.showName=function(){this.txtName.visible=true;this.refreshCache()};facilis.ActivityElement.prototype.hideName=function(){this.txtName.visible=false;this.refreshCache()};facilis.ActivityElement.prototype.bonus=function(){this.shadow=new facilis.Shadow("#AAAAFF",0,0,30);var a=this;try{a.updateCache()}catch(c){}setTimeout(function(){a.shadow=null;try{a.updateCache()}catch(b){}},1E3)};facilis.ActivityElement.prototype.greenLight=
null;facilis.ActivityElement.prototype.showCorrect=function(a){if(this.greenLight){this.removeChild(this.greenLight);this.greenLight=null}if(a){this.greenLight=facilis.IconManager.getInstance().getIcon("icons.drop.Permited");this.addChild(this.greenLight);this.greenLight.x=7;this.greenLight.y=7}try{this.updateCache()}catch(c){}};facilis.ActivityElement.prototype.wrongFilter=null;facilis.ActivityElement.prototype.tiltWrong=function(){this.shadow=new facilis.Shadow("#FF0000",0,0,15);var a=this;try{a.updateCache()}catch(c){}setTimeout(function(){a.shadow=
null;try{a.updateCache()}catch(b){}},1E3)}})();
(function(){function a(){if(!a.allowInstantiation)throw Error("Error: Instantiation failed: Use SingletonDemo.getInstance() instead of new.");facilis.EventDispatcher.initialize(this);this.gameState=a.GAME_STOPPED;this.gameMode=a.MODE_DESCRIPTION;this.allItems=[];this.gameItems=[];this.answeredGameItems=[];this.currentAnswer=this.currentElement=null;this.score=0;this.processDescription=""}a.GAME_STOPPED="GAME_STOPPED";a.GAME_ENDED="GAME_ENDED";a.GAME_PLAYING="GAME_PLAYING";a.GAME_PAUSED="GAME_PAUSED";
a.GAME_READY="GAME_READY";a.GAME_NEXT="GAME_NEXT";a.GAME_CORRECT="GAME_CORRECT";a.GAME_BONUS="GAME_BONUS";a.GAME_WRONG="GAME_WRONG";a.INPECT_ELEMENT="INPECT_ELEMENT";a.MODE_NAME="MODE_NAME";a.MODE_DESCRIPTION="MODE_DESCRIPTION";a.MODE_PERFORMER="MODE_PERFORMER";a.allowInstantiation=false;a.getInstance=function(){if(a._instance==null){a.allowInstantiation=true;a._instance=new a;a.allowInstantiation=false}return a._instance};var c=facilis.extend(a,{});c.init=function(){facilis.MultiSelect.MULTISELECT_ENABLED=
false;facilis.View.getInstance().addEventListener(facilis.View.ON_LOAD,this.viewLoad.bind(this));facilis.View.getInstance().addEventListener(facilis.View.ON_SELECT,this.elementSelect.bind(this))};c.play=function(){this.score=0;this.answeredGameItems=[];this.gameItems=this.setShuffled(this.gameItems);this.resetElements();this.setNameVisibles(this.gameMode==facilis.game.GameController.MODE_DESCRIPTION||this.gameMode==facilis.game.GameController.MODE_PERFORMER);this.gameState=facilis.game.GameController.GAME_PLAYING;
this.dispatchEvent(new facilis.Event(facilis.game.GameController.GAME_PLAYING));this.nextElement()};Object.defineProperty(c,"remaining",{get:function(){return this.gameItems.length}});c.resetElements=function(){for(var b=this.gameItems,d=[];b.length>0;){var e=b.shift();e.init();e.getGameTypeValue()&&e.getGameTypeValue()!=""?d.push(e):this.answeredGameItems.push(e)}this.gameItems=d};c.setNameVisibles=function(b){for(var d=0;d<this.allItems.length;d++)b?this.allItems[d].element.getElement().showName():
this.allItems[d].element.getElement().hideName()};c.end=function(){this.gameState=facilis.game.GameController.GAME_ENDED;for(this.score=facilis.game.ScoreCalculator.calculate(this.answeredGameItems);this.answeredGameItems.length>0;)this.gameItems.push(this.answeredGameItems.shift());this.dispatchEvent(new facilis.Event(facilis.game.GameController.GAME_ENDED))};c.stop=function(){this.gameState=facilis.game.GameController.GAME_STOPPED;for(this.score=facilis.game.ScoreCalculator.calculate(this.answeredGameItems);this.answeredGameItems.length>
0;)this.gameItems.push(this.answeredGameItems.shift());this.dispatchEvent(new facilis.Event(facilis.game.GameController.GAME_STOPPED))};c.pause=function(){this.gameState=facilis.game.GameController.GAME_PAUSED;this.dispatchEvent(new facilis.Event(facilis.game.GameController.GAME_PAUSED))};c.checkCorrectAnswers=function(b){for(var d=0;d<this.gameItems.length;d++)if(this.gameItems[d].element==b&&this.gameItems[d].checkCorrect(this.currentElement)){this.setCorrect(this.gameItems[d]);this.gameItems.splice(d,
1);return true}return false};c.getQuestion=function(){return this.currentElement.getGameTypeValue()};c.setShuffled=function(b){for(var d=[],e=[],f=0;f<b.length;f++)e.push(b[f]);for(;e.length>0;)d.push(e.splice(Math.floor(Math.random()*e.length),1)[0]);return d};c.nextElement=function(){facilis.View.getInstance().unselectAll();if(this.gameItems.length>0){this.currentElement=this.gameItems[0];if(this.currentElement.getGameTypeValue()&&this.currentElement.getGameTypeValue()!=""){this.currentAnswer=new facilis.game.Answer;
this.currentAnswer.start=(new Date).getTime();this.dispatchEvent(new facilis.Event(facilis.game.GameController.GAME_NEXT))}else{this.answeredGameItems.push(this.gameItems.shift());nextElement()}}else this.end()};c.setCorrect=function(b){this.currentAnswer.end=(new Date).getTime();if(this.currentAnswer.end-this.currentAnswer.start<facilis.game.ScoreCalculator.timeForBonus&&b.answers.length==0){this.dispatchEvent(new facilis.Event(facilis.game.GameController.GAME_BONUS));b.element.getElement().bonus()}else this.dispatchEvent(new facilis.Event(facilis.game.GameController.GAME_CORRECT));
this.currentAnswer.correct=true;b.addAnswer(this.currentAnswer);this.currentAnswer=null;this.answeredGameItems.push(b);b.element.getElement().showName();b.element.getElement().showCorrect(true)};c.viewLoad=function(){this.currentElement=null;var b=facilis.View.getInstance().getMainProcessData();this.processDescription=(this.processDescription=b.documentation)?this.processDescription:"";facilis.game.ScoreCalculator.processName=b.name?b.name:"";this.allItems=[];b=facilis.View.getInstance().getElements();
for(var d=0;d<b.length;d++)if(b[d].elementType=="task"||b[d].elementType=="esubflow"||b[d].elementType=="csubflow")this.allItems.push(new facilis.game.GameItem(b[d]));this.setNameVisibles(this.gameMode==facilis.game.GameController.MODE_DESCRIPTION||this.gameMode==facilis.game.GameController.MODE_PERFORMER);this.gameItems=this.setShuffled(this.allItems);this.dispatchEvent(new facilis.Event(facilis.game.GameController.GAME_READY))};c.elementSelect=function(){var b=facilis.View.getInstance().getSelectedElements()[0];
if(b&&b.getElement&&b.getElement()instanceof facilis.ActivityElement)if(this.gameState==facilis.game.GameController.GAME_PLAYING)if(b===this.currentElement.element){this.setCorrect(this.gameItems.shift());this.nextElement()}else if(this.checkCorrectAnswers(b))this.nextElement();else{this.currentAnswer.end=(new Date).getTime();this.currentAnswer.correct=false;this.currentElement.addAnswer(this.currentAnswer);this.currentAnswer=new facilis.game.Answer;this.currentAnswer.start=(new Date).getTime();facilis.View.getInstance().unselectAll();
b.getElement().tiltWrong();this.dispatchEvent(new facilis.Event(facilis.game.GameController.GAME_WRONG))}else for(var d=0;d<this.gameItems.length;d++){if(this.gameItems[d].element==b){this.currentElement=this.gameItems[d];this.dispatchEvent(new facilis.Event(facilis.game.GameController.INPECT_ELEMENT));break}}else if(this.gameState!=facilis.game.GameController.GAME_PLAYING){this.currentElement=null;this.dispatchEvent(new facilis.Event(facilis.game.GameController.INPECT_ELEMENT))}};c.forceEndGame=
function(){this.end()};facilis.game.GameController=facilis.promote(a,"Object")})();
(function(){function a(){}a._disabled=false;a.correct=function(){a.play("correct")};a.error=function(){a.play("error")};a.bonus=function(){a.play("bonus")};a.music=function(){a.play("music")};a.score=function(){a.play("score")};Object.defineProperty(a,"enable",{set:function(c){createjs.Sound.setMute(!c)}});a.play=function(c){a._disabled||createjs.Sound.play(c)};a.handleSoundLoaded=function(c){console.log("Preloaded:",c.id,c.src)};a.init=function(){createjs.Sound.addEventListener("fileload",this.handleSoundLoaded);
createjs.Sound.alternateExtensions=["mp3"];createjs.Sound.registerSounds([{id:"correct",src:"correct.mp3"},{id:"error",src:"error.mp3"},{id:"bonus",src:"bonus.mp3"},{id:"score",src:"score.mp3"},{id:"music",src:"music.mp3"}],facilis.game.gameAssetsUrl+"audio/")};setTimeout(function(){a.init()},500);facilis.game.AudioManager=a})();
(function(){function a(b){this.name="";this.performers=[];this.description="";this._answers=[];this.element=b;this.parseInfo(b.getData())}var c=facilis.extend(a,{});c.init=function(){this._answers=[];this.element.getElement().showCorrect(false)};c.parseInfo=function(b){this.performers=[];this.data=b;this.name=this.data.name||this.data.nameChooser;this.description=this.data.documentation;this.performers=this.data.performers||[];this.performers.sort(function(d,e){return d.name>e.name})};c.checkCorrect=
function(b){return this.getGameTypeValue()==b.getGameTypeValue()};c.getGameTypeValue=function(){if(facilis.game.GameController.getInstance().gameMode==facilis.game.GameController.MODE_NAME)return this.name;if(facilis.game.GameController.getInstance().gameMode==facilis.game.GameController.MODE_DESCRIPTION)return this.description;if(facilis.game.GameController.getInstance().gameMode==facilis.game.GameController.MODE_PERFORMER)return this.getPerformersString()};c.getPerformersString=function(){for(var b=
[],d=0;d<this.performers.length;d++)b.push(this.performers[d].name);return b.join(", ")};Object.defineProperty(c,"answers",{get:function(){return this._answers}});c.addAnswer=function(b){this._answers.push(b)};facilis.game.GameItem=facilis.promote(a,"Object")})();(function(){function a(){}var c=facilis.extend(a,{});c.start=null;c.end=null;c.correct=null;facilis.game.Answer=facilis.promote(a,"Object")})();
(function(){function a(){}var c=facilis.extend(a,{});c.name=null;c.date=null;c.score=null;facilis.game.HighScore=facilis.promote(a,"Object")})();
(function(){function a(){}a.timeForBonus=4E3;a.bonusTime=-1E4;a.penaltyTime=1E4;a.score=0;a.bonus=0;a.incorrect=0;a.correct=0;a.avgTime=0;a.totalTime=0;a.userName="";a.processName="";a.details=[];a.highScores={};a.calculate=function(c){a.score=0;a.bonus=0;a.incorrect=0;a.avgTime=0;a.totalTime=0;a.correct=0;a.details=[];for(var b=0,d=0;d<c.length;d++){var e=c[d],f=e.answers,g={};g[facilis.LabelManager.getInstance().getLabel("lbl_element")]=e.name;for(var i=e=0,l=0,j=0;j<f.length;j++){var k=f[j],h=
k.end-k.start;facilis.game.ScoreCalculator.totalTime+=h;if(k.correct){if(h<facilis.game.ScoreCalculator.timeForBonus&&i==0){facilis.game.ScoreCalculator.bonus++;l++;e++;h+=a.bonusTime}else e++;a.correct++}else{h+=facilis.game.ScoreCalculator.penaltyTime;facilis.game.ScoreCalculator.incorrect++;i++}b+=h}g[facilis.LabelManager.getInstance().getLabel("lbl_correct")]=e;g[facilis.LabelManager.getInstance().getLabel("lbl_errors")]=i;g[facilis.LabelManager.getInstance().getLabel("lbl_bonus")]=l;facilis.game.ScoreCalculator.details.push(g)}facilis.game.ScoreCalculator.totalTime/=
1E3;facilis.game.ScoreCalculator.score=1/facilis.game.ScoreCalculator.totalTime*1E6;if(!isFinite(facilis.game.ScoreCalculator.score))facilis.game.ScoreCalculator.score=0;facilis.game.ScoreCalculator.avgTime=facilis.game.ScoreCalculator.totalTime/c.length;facilis.game.ScoreCalculator.addHighScore();facilis.game.ScoreCalculator.score=Math.round(facilis.game.ScoreCalculator.score);return facilis.game.ScoreCalculator.score};a.addHighScore=function(){var c={score:facilis.game.ScoreCalculator.score,name:facilis.game.ScoreCalculator.userName};
facilis.game.HighScoreController.getInstance().addHighScore(facilis.game.ScoreCalculator.processName,c)};a.isHighScore=function(){var c={score:facilis.game.ScoreCalculator.score,name:facilis.game.ScoreCalculator.userName},b=facilis.game.HighScoreController.getInstance().highScores;if(parseInt(b[0].score)<=c.score)return true;return false};a.getHighScore=function(){if(facilis.game.HighScoreController.getInstance().highScores)return facilis.game.HighScoreController.getInstance().highScores;return null};
a.formatTime=function(c){c=parseInt(c);if(c==0)return 0;var b=c>3600?Math.floor(c/3600)+":":"00:";return b+""+((b&&c%3600<600?"0":"")+Math.floor(c%3600/60)+":")+""+((c%60<10?"0":"")+c%60)};a.formatScore=function(c){c=c.toString();var b=c.indexOf(".");return c.replace(/\d(?=(?:\d{3})+(?:\.|$))/g,function(d,e){return b<0||e<b?d+".":d})};facilis.game.ScoreCalculator=facilis.promote(a,"Object")})();
(function(){function a(){if(!a.allowInstantiation)throw Error("Error: Instantiation failed: Use SingletonDemo.getInstance() instead of new.");this._highScoreModel={};this._highScores=[];this.loadHighScoreModel()}a.allowInstantiation=false;a._instance=null;a.getInstance=function(){if(a._instance==null){a.allowInstantiation=true;a._instance=new a;a.allowInstantiation=false}return a._instance};var c=facilis.extend(a,{});c.addHighScore=function(b,d){b=!b||b==""?"empty":b;this.loadHighScores(b);this._highScores.push(d);
this._highScores.sort(function(e,f){return f.score-e.score});this._highScores.length>10&&this._highScores.pop();this.saveHighScores(b)};Object.defineProperty(c,"highScores",{get:function(){return this._highScores}});c.loadHighScores=function(b){this._highScores=[];if(this._highScoreModel[b])this._highScores=this._highScoreModel[b]};c.loadHighScoreModel=function(){this._highScoreModel={};if(localStorage["facilis.game.HighScore"])this._highScoreModel=JSON.parse(localStorage["facilis.game.HighScore"])};
c.saveHighScores=function(b){this._highScoreModel[b]=this._highScores;localStorage["facilis.game.HighScore"]=JSON.stringify(this._highScoreModel)};facilis.game.HighScoreController=facilis.promote(a,"Object")})();
function WindowManager(){if(!WindowManager.allowInstantiation)throw Error("Error: Instantiation failed: Use SingletonDemo.getInstance() instead of new.");this.onCloseFunctions={};this.lastOpenedModalId=null;this.openModal=function(a){var c=this.getModalId();this.lastOpenedModalId=c;var b='<div class="modal" id="'+c+'" data-backdrop="static" data-keyboard="false"><div class="modal-dialog"><div class="modal-content"><div class="modal-header">';if(!a.closeButton==false)b+='<button type="button" class="close" onclick="facilis.game.WindowManager.getInstance().closeModal(\''+
c+'\')" data-dismiss="modal" aria-hidden="true">x</button>';b+='<h4 class="modal-title">'+(a.title||"")+'</h4></div><div class="modal-body"></div>';if(a.footer&&a.footer!="")b+='<div class="modal-footer">'+a.footer+"</div>";b+="</div></div></div>";var d=function(){$(".modal").css("overflow-y","auto")};if(a.onClose){var e=a.onClose;d=function(){e();$(".modal").css("overflow-y","auto")}}this.onCloseFunctions["closeFunction_"+c]=d;if(!a.contentHTML)if(a.contentUrl){var f=this;$.get(a.contentUrl,null,
function(g){$(g.firstChild.outerHTML).appendTo($("#"+c).find(".modal-body"));f.startModal(c);a.onLoad&&a.onLoad($("#"+c))},"xml")}$(b).appendTo("body");b={};if(a.width)b.width=a.width;if(a.height)b.height=a.height;$("#"+c).find(".modal-dialog").css(b);return $("#"+c)};this.startModal=function(a){$("#"+a).modal({show:true,truebackdrop:"static",keyboard:false})};this.closeModal=function(a){var c=null;if(this.onCloseFunctions["closeFunction_"+a]){c=this.onCloseFunctions["closeFunction_"+a];this.onCloseFunctions["closeFunction_"+
a]=null}$("#"+a).modal("hide");setTimeout(function(){$("#"+a).remove();c&&c()},800)};this.modalCount=0;this.getModalId=function(){this.modalCount++;return"_modal_"+this.modalCount}}WindowManager.allowInstantiation=false;WindowManager.getInstance=function(){if(WindowManager._instance==null){WindowManager.allowInstantiation=true;WindowManager._instance=new WindowManager;WindowManager.allowInstantiation=false}return WindowManager._instance};facilis.game.WindowManager=WindowManager;
(function(){function a(b){this.actions=b.actions;this.loadBtn=b.loadButton;this.playStopButton=b.startStopButton;this.questionLabel=b.questionLabel;this.taskName=b.taskName;this.taskDescription=b.taskDescription;this.taskPerformer=b.taskPerformer;this.nameInput=b.nameInput;this.countdownEl=b.countdown;this.printerButton=b.printerButton;this.counter=b.counter;this.setup()}var c=facilis.extend(a,{});c.setup=function(){facilis.game.GameController.getInstance().addEventListener(facilis.game.GameController.GAME_PAUSED,
this.onGamePause.bind(this));facilis.game.GameController.getInstance().addEventListener(facilis.game.GameController.GAME_PLAYING,this.onGamePlaying.bind(this));facilis.game.GameController.getInstance().addEventListener(facilis.game.GameController.GAME_READY,this.onGameReady.bind(this));facilis.game.GameController.getInstance().addEventListener(facilis.game.GameController.GAME_STOPPED,this.onGameStop.bind(this));facilis.game.GameController.getInstance().addEventListener(facilis.game.GameController.GAME_ENDED,
this.onGameEnd.bind(this));facilis.game.GameController.getInstance().addEventListener(facilis.game.GameController.GAME_NEXT,this.onGameNext.bind(this));facilis.game.GameController.getInstance().addEventListener(facilis.game.GameController.GAME_CORRECT,this.onGameCorrect.bind(this));facilis.game.GameController.getInstance().addEventListener(facilis.game.GameController.GAME_WRONG,this.onGameWrong.bind(this));facilis.game.GameController.getInstance().addEventListener(facilis.game.GameController.GAME_BONUS,
this.onGameBonus.bind(this));facilis.game.GameController.getInstance().addEventListener(facilis.game.GameController.INPECT_ELEMENT,this.onInspectElement.bind(this));facilis.game.GameController.getInstance().addEventListener(facilis.game.GameController.GAME_READY,this.onInspectElement.bind(this));this.onInspectElement();this.loadBtn.addEventListener("change",this.loadGameFile.bind(this));this.playStopButton.addEventListener("click",this.startStopClick.bind(this));this.playStopButton.disabled=true;
this.taskDescription.addEventListener("click",this.radioChecked.bind(this));this.taskDescription.checked=true;this.taskPerformer.addEventListener("click",this.radioChecked.bind(this));this.taskPerformer.checked=false;this.taskName.addEventListener("click",this.radioChecked.bind(this));this.taskName.checked=false;this.countdown=new facilis.game.CountdownTimer(this.countdownEl);this.countdown.displayRemaining=false;this.countdown.x=5;this.countdown.y=5;this.countdown.scaleX=2;this.countdown.scaleY=
2;this.countdown.addEventListener(facilis.game.CountdownTimer.TIMER_ENDED,function(){facilis.game.GameController.getInstance().end()});this.questionLabel.disabled=true;this.questionLabel.visible=false;this.nameInput.addEventListener("change",this.nameInputChanged.bind(this));this.printerButton.addEventListener("click",this.printDocumentation.bind(this));this.checkPlayButton()};c.onGamePlaying=function(){this.loadBtn.disabled=true;this.playStopButton.disabled=true;this.countdown.startTimer(3600,null);
this.checkPlayButton();this.playStopButton.playing=true;this.nameInput.disabled=true;this.taskName.disabled=true;this.taskDescription.disabled=true;this.taskPerformer.disabled=true;this.questionLabel.visible=true;this.countdown.visible=true};c.onGameReady=function(){this.loaded=true;this.loadBtn.disabled=false;this.playStopButton.disabled=false;this.taskName.disabled=false;this.taskDescription.disabled=false;this.taskPerformer.disabled=false;this.playStopButton.playing=false;this.setQuestionText(this.getProcessName()+
"\n"+facilis.game.GameController.getInstance().processDescription);this.countdown.visible=false;this.checkPlayButton()};c.onGameEnd=function(){this.counter.innerText=" ";this.counter.textContent=" ";this.loadBtn.disabled=false;this.playStopButton.disabled=false;this.checkPlayButton();this.taskName.disabled=false;this.taskDescription.disabled=false;this.taskPerformer.disabled=false;this.playStopButton.playing=false;this.nameInput.disabled=false;this.countdown.stopTimer();this.countdown.clear();this.countdown.visible=
false;this.questionLabel.visible=true;this.setQuestionText(facilis.game.GameController.getInstance().processDescription);showWhiteBoardWindow()};c.onGameStop=function(){this.loadBtn.disabled=false;this.playStopButton.disabled=false;this.playStopButton.playing=false;this.checkPlayButton();this.taskName.visible=true;this.taskDescription.visible=true;this.taskPerformer.visible=true;this.nameInput.disabled=false;this.countdown.stopTimer();this.countdown.visible=false;this.questionLabel.visible=true;this.setQuestionText(facilis.game.GameController.getInstance().processDescription)};
c.onGameNext=function(){this.setQuestionText(facilis.game.GameController.getInstance().getQuestion());this.counter.innerText=facilis.LabelManager.getInstance().getLabel("lbl_remaining")+" "+facilis.game.GameController.getInstance().remaining;this.counter.textContent=facilis.LabelManager.getInstance().getLabel("lbl_remaining")+" "+facilis.game.GameController.getInstance().remaining};c.onGameCorrect=function(){facilis.game.AudioManager.correct()};c.onGameWrong=function(){facilis.game.AudioManager.error()};
c.onGameBonus=function(){facilis.game.AudioManager.bonus()};c.startStopClick=function(){this.playStopButton.playing?facilis.game.GameController.getInstance().play():facilis.game.GameController.getInstance().stop()};c.endClick=function(){facilis.game.GameController.getInstance().stop()};c.loadClick=function(){};c.radioChecked=function(b){if(!b.target.disabled)if(this.taskDescription==b.target){facilis.game.GameController.getInstance().gameMode=facilis.game.GameController.MODE_DESCRIPTION;this.taskPerformer.checked=
false;this.taskName.checked=false}else if(this.taskPerformer==b.target){facilis.game.GameController.getInstance().gameMode=facilis.game.GameController.MODE_PERFORMER;this.taskDescription.checked=false;this.taskName.checked=false}else if(this.taskName==b.target){facilis.game.GameController.getInstance().gameMode=facilis.game.GameController.MODE_NAME;this.taskPerformer.checked=false;this.taskDescription.checked=false}};c.onGamePause=function(){};c.onInspectElement=function(){var b;if(facilis.game.GameController.getInstance().processDescription)b=
this.getProcessName()+"\n"+facilis.game.GameController.getInstance().processDescription;if(facilis.game.GameController.getInstance().currentElement){var d=facilis.game.GameController.getInstance().currentElement;if(d.name)b=facilis.LabelManager.getInstance().getLabel("lbl_taskName")+":  "+d.name;if(d.description)b+="\n"+facilis.LabelManager.getInstance().getLabel("lbl_taskDesc")+":  "+d.description;if(d.performers&&d.performers.length>0)b+="\n"+facilis.LabelManager.getInstance().getLabel("lbl_taskPerf")+
":  "+d.getPerformersString()}this.setQuestionText(b)};c.setQuestionText=function(b){this.questionLabel.value=b};c.getProcessName=function(){var b=facilis.View.getInstance().getMainProcessData();if(b)return b.name;return"UnNamed"};c.nameInputChanged=function(){facilis.game.ScoreCalculator.userName=this.nameInput.value;this.checkPlayButton()};c.checkPlayButton=function(){this.playStopButton.disabled=!(this.nameInput.value!="\r"&&this.nameInput.value!=""&&(this.loaded||UrlXpdlLoaded));this.playStopButton.title=
"";if(this.playStopButton.disabled){var b=facilis.LabelManager.getInstance().getLabel("lbl_mustprovide"),d="";this.loaded||(d=facilis.LabelManager.getInstance().getLabel("lbl_agamefile"));if((this.nameInput.value=="\r"||this.nameInput.value=="")&&!this.loaded)d+=", ";if(this.nameInput.value=="\r"||this.nameInput.value=="")d+=facilis.LabelManager.getInstance().getLabel("lbl_aplayername");b=b.replace("*",d);this.playStopButton.title=b}};c.printDocumentation=function(){(new facilis.documentation.AbstractDocumentator).canGenerate()&&
facilis.game.WindowManager.getInstance().openModal({width:"700px",height:"600px",closeButton:false,contentUrl:facilis.game.gameAssetsUrl+"screens/ProcessDocumentationWindow.html",title:facilis.LabelManager.getInstance().getLabel("lbl_generatedocumentation"),footer:'<button type="button" class="btn btn-danger" onclick="printDocumentation()">Print</button> <button type="button" class="btn btn-danger" onclick="generateHtml()">Html</button> <button type="button" class="btn btn-danger" onclick="generatePdf()">Pdf</button> <button type="button" class="btn btn-danger" onclick="closeMe()">Close</button> '})};
c.loadGameFile=function(b){var d=new FileReader;d=b.target.files;if(d.length!=0){b=d[0];d=new FileReader;d.onload=function(){loadXpdl(this.result)};d.readAsText(b,"utf-8")}};facilis.game.GamePanel=facilis.promote(a,"Object")})();
(function(){function a(){facilis.EventDispatcher.initialize(this);var d=this;this.interval=null;this.lastTick=0;this.start=function(){this.interval=setInterval(function(){d.lastTick++;d.dispatchEvent(new facilis.Event(a.TIMER))},300)};this.stop=function(){clearInterval(this.interval)};this.getLastTick=function(){return this.lastTick}}function c(d){this.container=d;this.isFinished=false;this.paused=true;this._totalTimePassed=this._totalTimeInSeconds=this._totalTimeInMilliseconds=this._startTime=this._recentTimePassed=
this._lastTime=0;this._whenFinishedCallBack=null;this.tensOfSecondsLeft=this.secondsLeft=this.minutesLeft=0;this.timeSecondsLeft=1E3;this.countTo=-1;this.displayRemaining=true;facilis.EventDispatcher.initialize(this);this.setup()}a.TIMER="timer_timer";var b=facilis.extend(c,{});b.TIMER_ENDED="TIMER_ENDED";b.setup=function(){this.container.innerHTML="";this.container.style.display="table";this.minutes=document.createElement("div");this.minutes.style.display="table-cell";this.minutes.style.width="40%";
this.minutes.style.textAlign="right";this.container.appendChild(this.minutes);this.dots=document.createElement("div");this.dots.style.display="table-cell";this.dots.style.width="20%";this.dots.style.textAlign="center";this.container.appendChild(this.dots);this.dots.innerText=" : ";this.seconds=document.createElement("div");this.seconds.style.display="table-cell";this.seconds.style.width="40%";this.seconds.style.textAlign="left";this.container.appendChild(this.seconds);this.timer=new a(300);this.timer.addEventListener(a.TIMER,
this.loop.bind(this))};b.continueTimer=function(){this._lastTime=this.getTimer();this.paused=false};b.dispose=function(){stopTimer();removeChild(_myTimerClip);this._whenFinishedCallBack=_myTimerClip=null};b.initialise=function(d){_myTimerClip=d};b.pauseTimer=function(){console.log("pausing timer");this.paused=true};b.startTimer=function(d,e){console.log("starting timer for "+d+" seconds");this._totalTimeInSeconds=d;this._whenFinishedCallBack=e;this._totalTimeInMilliseconds=d*1E3;this.timer.start();
this._lastTime=this._startTime=this.getTimer();this._totalTimePassed=0;this.isFinished=this.paused=false};b.stopTimer=function(){this.timer.stop()};b.updateTimeDisplay=function(){this._currentTime=this.getTimer();this._recentTimePassed=this._currentTime-this._lastTime;this._lastTime=this._currentTime;this._totalTimePassed+=this._recentTimePassed;this.timeSecondsLeft=Math.ceil((this._totalTimeInMilliseconds-this._totalTimePassed)/1E3);if(this.timeSecondsLeft<1)this.isFinished=true;var d=this.timeSecondsLeft;
this.displayRemaining||(d=this._totalTimeInSeconds-d);this.minutesLeft=parseInt(d/60);d-=this.minutesLeft*60;this.tensOfSecondsLeft=parseInt(d/10);d-=this.tensOfSecondsLeft*10;this.secondsLeft=d;if(this.minutes.innerText!=this.minutesLeft)this.minutes.innerText=this.minutesLeft;this.seconds.innerText=this.tensOfSecondsLeft+""+this.secondsLeft};b.timerFinished=function(){console.log("timer has finished countdown");this.dispatchEvent(new facilis.Event(facilis.game.CountdownTimer.TIMER_ENDED));this.stopTimer();
this._whenFinishedCallBack!=null&&this._whenFinishedCallBack.call()};b.loop=function(){if(!this.paused){this.updateTimeDisplay();this.isFinished&&this.timerFinished()}};b.clear=function(){this.seconds.innerText="";this.minutes.innerText=""};b.getTimer=function(){return(new Date).getTime()};facilis.game.CountdownTimer=facilis.promote(c,"Object")})();
